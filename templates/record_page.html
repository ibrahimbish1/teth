async function fetchRecords() {
    const name = "{{ name }}"; // The name is passed from Flask
    const response = await fetch(`/records/${name}`);
    const records = await response.json();
    displayRecords(name, records);
}

function displayRecords(name, records) {
    const recordsDiv = document.getElementById('records');

    if (records.message) {
        recordsDiv.innerHTML = `<p>${records.message}</p>`;
        return;
    }

    for (const [date, recordList] of Object.entries(records)) {
        const dayName = new Date(date).toLocaleDateString('en-US', { weekday: 'long' });
        recordsDiv.innerHTML += `<h2>${dayName} (${date})</h2>`;
        recordList.forEach(record => {
            const time = record.time || 'N/A';
            const personId = record.id || 'N/A';
            recordsDiv.innerHTML += `<div class="record">Time: ${time}, ID: ${personId}</div>`;
        });
    }
}

// Fetch records when the page loads
window.onload = fetchRecords;
